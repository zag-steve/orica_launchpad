var globalVar="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof global?global:Function("return this;")();!function(e){"use strict";var s,t,o,a,n,i,r;if(o=e.IDBObjectStore||e.webkitIDBObjectStore||e.mozIDBObjectStore||e.msIDBObjectStore,t=e.IDBIndex||e.webkitIDBIndex||e.mozIDBIndex||e.msIDBIndex,void 0!==o&&void 0!==t){var l=!1;"undefined"!=typeof WorkerGlobalScope&&(0<=navigator.userAgent.indexOf("Safari/602")||0<=navigator.userAgent.indexOf("Safari/603"))&&(l=!0),(l||void 0===o.prototype.getAll||void 0===t.prototype.getAll||void 0===o.prototype.getAllKeys||void 0===t.prototype.getAllKeys)&&(a=function(){this.result=null,this.error=null,this.source=null,this.transaction=null,this.readyState="pending",this.onsuccess=null,this.onerror=null,this.toString=function(){return"[object IDBRequest]"}},s=function(e){this.type=e,this.target=null,this.currentTarget=null,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.eventPhase=this.NONE,this.stopPropagation=function(){console.log("stopPropagation not implemented in IndexedDB-getAll-shim")},this.stopImmediatePropagation=function(){console.log("stopImmediatePropagation not implemented in IndexedDB-getAll-shim")},this.bubbles=!1,this.cancelable=!1,this.preventDefault=function(){console.log("preventDefault not implemented in IndexedDB-getAll-shim")},this.defaultPrevented=!1,this.isTrusted=!1,this.timestamp=Date.now()},n=(i=function(l){return function(e,n){var i,r;e=void 0!==e?e:null,i=new a,r=[];var t=this.openCursor(e);return t.onsuccess=function(e){var t,o;(t=e.target.result)&&(r.push(t[l]),void 0===n||r.length<n)?t.continue():"function"==typeof i.onsuccess&&((o=new s("success")).target={readyState:"done",result:r},i.result=r,i.onsuccess(o))},t.onerror=function(e){console.log("IndexedDB-getAll-shim error when getting data:",e.target.error),i.onerror(e)},i}})("value"),r=i("key"),(l||void 0===o.prototype.getAll)&&(o.prototype.getAll=n),(l||void 0===t.prototype.getAll)&&(t.prototype.getAll=n),(l||void 0===o.prototype.getAllKeys)&&(o.prototype.getAllKeys=r),(l||void 0===t.prototype.getAllKeys)&&(t.prototype.getAllKeys=r))}}(globalVar);